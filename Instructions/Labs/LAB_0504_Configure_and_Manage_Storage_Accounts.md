---
lab:
    title: '랩: Azure Stack Hub 스토리지 계정 구성 및 관리'
    module: '모듈 5: 인프라 관리'
---

# 랩 - Azure Stack Hub 스토리지 계정 구성 및 관리
# 학생 랩 매뉴얼

## 랩 종속성

- 없음

## 예상 소요 시간

30분

## 랩 시나리오

여러분은 Azure Stack Hub 환경의 운영자입니다. 이 환경의 스토리지 계정을 구성하고 관리해야 합니다.

## 목표

이 랩을 완료하면 다음을 수행할 수 있습니다.

- Azure Stack Hub 스토리지 구성
- Azure Stack Hub 스토리지 계정 관리

## 랩 환경 

랩 환경에는 다음과 같은 구성 요소가 포함됩니다.

- 다음 액세스 지점을 사용하여 **AzS-HOST1** 서버에서 실행되는 ASDK 배포:

  - 관리자 포털: https://adminportal.local.azurestack.external
  - 관리자 ARM 엔드포인트: https://adminmanagement.local.azurestack.external
  - 사용자 포털: https://portal.local.azurestack.external
  - 사용자 ARM 엔드포인트: https://management.local.azurestack.external

- 관리자:

  - ASDK 클라우드 운영자 사용자 이름: **CloudAdmin@azurestack.local**
  - ASDK 클라우드 운영자 암호: **Pa55w.rd1234**
  - ASDK 호스트 관리자 사용자 이름: **AzureStackAdmin@azurestack.local**
  - ASDK 호스트 관리자 암호: **Pa55w.rd1234**

이 랩을 진행하면서 추가 사용자 계정을 만듭니다.


### 연습 0: 랩 준비

이 연습에서는 이 랩에서 사용할 Active Directory 사용자 계정을 만듭니다.

1. 테넌트 사용자 계정 만들기(클라우드 운영자 역할)

#### 작업 1: 테넌트 사용자 계정 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 테넌트 사용자 계정 만들기(클라우드 운영자 역할)

1. 필요한 경우 다음 자격 증명을 사용하여 **AzS-HOST1**에 로그인합니다.

    - 사용자 이름: **AzureStackAdmin@azurestack.local**
    - 암호: **Pa55w.rd1234**

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 **시작**을 클릭하고 시작 메뉴에서 **Windows 관리 도구**를 클릭합니다. 그런 다음 관리 도구 목록에서 **Active Directory 관리 센터**를 두 번 클릭합니다.
1. **Active Directory 관리 센터** 콘솔에서 **azurestack(로컬)** 을 클릭합니다.
1. 세부 정보 창에서 **사용자** 컨테이너를 두 번 클릭합니다.
1. **작업** 창의 **사용자** 섹션에서 **새로 만들기 -> 사용자**를 클릭합니다.
1. **사용자 만들기** 창에서 다음 설정을 지정하고 **확인**을 클릭합니다. 

    - 전체 이름: **T1U1**
    - 사용자 UPN 로그온: **t1u1@azurestack.local**
    - 사용자 SamAccountName: **azurestack\t1u1**
    - 암호: **Pa55w.rd**
    - 암호 옵션: **기타 암호 옵션 -> 암호 사용 기간 제한 없음**

>**검토**: 이 연습에서는 이 랩에서 사용할 Active Directory 계정을 만들었습니다.


### 연습 1: Azure Stack Hub 스토리지 구성

이 연습에서는 Azure Stack Hub 스토리지를 구성합니다.

1. 스토리지 계정 보존 구성
1. 스토리지 서비스가 포함된 요금제 만들기
1. 요금제를 기준으로 제안 만들기

#### 작업 1: 스토리지 계정 보존 구성

이 작업에서는 다음을 수행합니다.

- 스토리지 계정 보존 구성

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 [Azure Stack Hub 관리자 포털](https://adminportal.local.azurestack.external/)이 표시된 웹 브라우저 창을 열고 CloudAdmin@azurestack.local로 로그인합니다.
1. Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **모든 서비스**를 클릭합니다.
1. **모든 서비스** 블레이드에서 **관리** 섹션을 선택하고 **지역 관리**를 클릭합니다.
1. **로컬** 블레이드에서 **리소스 공급자**를 클릭합니다.
1. **리소스 공급자** 블레이드에서 **스토리지**를 클릭합니다.
1. **스토리지** 블레이드에서 **구성**을 클릭합니다.
1. **스토리지 - 구성** 블레이드의 **삭제된 스토리지 계정의 보존 기간(일)** 텍스트 상자에 10을 입력하고 **저장**을 클릭합니다.


#### 작업 2: 스토리지 서비스가 포함된 요금제 만들기

이 작업에서는 다음을 수행합니다.

- 스토리지 서비스가 포함된 요금제 만들기

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **요금제**를 클릭합니다.
1. **새 요금제** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **storage-plan1**
    - 리소스 이름: **storage-plan1**
    - 리소스 그룹: 새 리소스 그룹 **storage-plans-RG**의 이름.

1. **다음: 서비스 >** 를 클릭합니다.
1. **새 요금제** 블레이드의 **서비스** 탭에서 **Microsoft.Storage** 체크박스를 선택합니다.
1. **다음: 할당량>** 을 클릭합니다.
1. **새 요금제** 블레이드의 **할당량** 탭에서 **Microsoft.Storage** 드롭다운 목록 옆의 **새로 만들기**를 클릭합니다.
1. **스토리지 할당량 만들기** 블레이드에서 다음 설정을 지정하고 **확인**을 클릭합니다.

    - 이름: **storage-plan1-storage-quota**
    - 최대 용량(GB): **200**
    - 총 스토리지 계정 수: **5**

1. **검토 + 만들기**와 **만들기**를 차례로 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.


#### 작업 3: 요금제를 기준으로 제안 만들기

이 작업에서는 다음을 수행합니다.

- 요금제를 기준으로 제안 만들기 

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **제안**을 클릭합니다.
1. **새 제안 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **storage-offer1**
    - 리소스 이름: **storage-offer1**
    - 리소스 그룹: **storage-offers-RG**
    - 이 제안을 공개로 설정: **예**

1. **다음: 기본 요금제 >** 를 클릭합니다. 
1. **새 제안 만들기** 블레이드의 **기본 요금제** 탭에서 **storage-plan1** 항목 옆의 체크박스를 선택합니다.
1. **다음: 추가 요금제 >** 를 클릭합니다.
1. **추가 요금제** 설정은 기본값으로 유지하고 **검토 + 만들기**를 클릭한 다음 **만들기**를 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

>**검토**: 이 연습에서는 삭제된 스토리지 계정 보존 설정을 구성하고 **Microsoft.Storage** 서비스 기반 요금제가 포함된 공용 제안을 만들었습니다. 


### 연습 2: Azure Stack Hub 스토리지 계정 관리

이 연습에서는 Azure Stack Hub 스토리지 계정을 관리합니다.

1. Azure 스토리지 계정 만들기 및 삭제(테넌트 사용자 역할)
1. 삭제된 스토리지 계정 복구(클라우드 운영자 역할)
1. 스토리지 용량 회수(클라우드 운영자 역할)

#### 작업 1: Azure 스토리지 계정 만들기 및 삭제(테넌트 사용자 역할)

이 작업에서는 다음을 수행합니다.

- Azure 스토리지 계정 만들기 및 삭제(테넌트 사용자 역할) 

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 웹 브라우저의 InPrivate 세션을 시작합니다.
1. 웹 브라우저 창에서 [Azure Stack Hub 사용자 포털](https://portal.local.azurestack.external)로 이동하여 **Pa55w.rd** 암호를 사용해 **t1u1@azurestack.local**로 로그인합니다.
1. Azure Stack Hub 사용자 포털의 대시보드에서 **구독 가져오기** 타일을 클릭합니다.
1. **구독 가져오기** 블레이드의 **이름** 텍스트 상자에 **t1u1-storage-subscription1**을 입력합니다.
1. 제안 목록에서 **storage-offer1**을 선택하고 **만들기**를 클릭합니다.
1. **구독이 생성되었습니다. 구독을 사용해서 시작하려면 포털을 새로 고쳐야 합니다.** 메시지가 표시되면 **새로 고침**을 클릭합니다. 
1. Azure Stack Hub 테넌트 포털의 허브 메뉴에서 **모든 서비스**를 클릭합니다.
1. 서비스 목록에서 **구독**을 클릭합니다.
1. **구독** 블레이드에서 **t1u1-storage-subscription1**을 클릭합니다.
1. **t1u1-base-subscription1** 블레이드에서 **리소스**를 클릭합니다.
1. **t1u1-base-subscription1 - 리소스** 블레이드에서 **+ 추가**를 클릭합니다.
1. **새로 만들기** 블레이드에서 **데이터 + 스토리지**를 클릭한 다음 **스토리지 계정**을 클릭합니다.
1. **스토리지 계정 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다(나머지는 기본값을 그대로 유지).

    - 리소스 그룹: 새 리소스 그룹 **storage-RG**의 이름.
    - 이름: 소문자나 숫자 3~24자가 포함된 고유한 이름
    - 위치: **로컬**
    - 성능: **표준**
    - 계정 종류: **스토리지(범용 v1)**
    - 복제: **LRS(로컬 중복 스토리지)**

1. **스토리지 계정 만들기** 블레이드의 **기본** 탭에서 **다음: 고급 >** 을 클릭합니다.
1. **스토리지 계정 만들기** 블레이드의 **고급** 탭에서 기본 설정을 유지하고 **검토 + 만들기**를 클릭합니다.
1. **스토리지 계정 만들기**의 **검토 + 만들기** 탭에서 **만들기**를 클릭합니다.

    >**참고**: 스토리지 계정이 프로비전될 때까지 기다립니다. 1분 정도 걸립니다.

1. 11-16단계를 진행하여 같은 리소스 그룹에 동일 설정으로 다른 스토리지 계정을 만듭니다. 

    >**참고**: 다음으로는 두 스토리지 계정을 모두 삭제합니다. 따라서 계정 이름을 먼저 적어 두세요. 이 랩의 뒷부분에서 계정 이름이 필요합니다.

1. Azure Stack Hub 사용자 포털의 허브 메뉴에서 **모든 서비스**를 클릭하고 **모든 서비스** 블레이드에서 **스토리지 계정**을 클릭합니다.
1. **스토리지 계정** 블레이드에서 구독 필터에 **t1u1-storage-subscription1**이 포함되어 있는지 확인합니다. 그런 다음 스토리지 계정 목록에서 이 작업 앞부분에서 만든 스토리지 계정 2개를 모두 선택하고 **삭제**를 클릭합니다.
1. **리소스 삭제** 블레이드의 **삭제 확인** 텍스트 상자에 **yes**를 입력하고 **삭제**를 클릭합니다.

#### 작업 2: 삭제된 스토리지 계정 복구(클라우드 운영자 역할) 

이 작업에서는 다음을 수행합니다.

- 삭제된 스토리지 계정 복구(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 내에서 Azure Stack 관리자 포털이 표시된 웹 브라우저 창으로 전환합니다. 그런 다음 **모든 서비스**를 클릭하고 **모든 서비스** 블레이드에서 **관리**를 클릭한 후에 관리 서비스 목록에서 **스토리지**를 클릭합니다.
1. **스토리지** 블레이드에서 **스토리지 계정**을 클릭합니다.
1. **스토리지 \| 스토리지 계정** 블레이드의 **계정 이름** 필터 텍스트 상자에 이전 작업에서 만든 첫 번째 스토리지 계정의 이름을 입력합니다. 그런 다음 해당 스토리지 계정 이름이 **삭제됨** 상태로 목록에 표시되는지 확인합니다.
1. 삭제한 첫 번째 스토리지 계정을 나타내는 항목을 클릭합니다.
1. **스토리지 계정** 블레이드에서 **복구**를 클릭합니다. 복구를 확인하라는 메시지가 나타나면 **예**를 클릭합니다.

    >**참고**: 작업이 완료될 때까지 기다립니다. 1분도 걸리지 않습니다. 복구한 스토리지 계정이 사용자 포털에 표시될 때까지는 시간이 좀 더 걸릴 수도 있습니다.

1. **스토리지 계정** 블레이드를 닫습니다.


#### 작업 3: 스토리지 용량 회수(클라우드 운영자 역할) 

이 작업에서는 다음을 수행합니다.

- 스토리지 용량 회수(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털에서 CloudAdmin@azurestack.local로 로그온한 상태로 **스토리지 \| 스토리지 계정** 블레이드에서 **새로 고침**을 클릭합니다.
1. **계정 이름** 필터 텍스트 상자에 첫 번째 스토리지 계정 이름이 표시된 상태에서 이제 스토리지 계정이 **활성** 상태로 목록에 표시되는지 확인합니다.
1. **스토리지 \| 스토리지 계정** 블레이드의 **계정 이름** 필터 텍스트 상자에 이전 작업에서 만든 두 번째 스토리지 계정의 이름을 입력합니다. 그런 다음 해당 스토리지 계정 이름이 **삭제됨** 상태로 목록에 표시되는지 확인합니다.
1. **스토리지 \| 스토리지 계정** 블레이드에서 **공간 회수**를 클릭하고 작업을 확인하라는 메시지가 표시되면 **예**를 클릭합니다.

    >**참고**: 작업이 완료될 때까지 기다립니다. 1분도 걸리지 않습니다.

1. 브라우저 페이지를 새로 고칩니다.
1. **스토리지 \| 스토리지 계정** 블레이드로 돌아와서 **계정 이름** 필터 텍스트 상자에 이전 작업에서 만든 두 번째 스토리지 계정의 이름을 입력합니다. 그런 다음 해당 스토리지 계정 이름이 검색 결과 목록에 더 이상 표시되지 않음을 확인합니다. 

>**검토**: 이 연습에서는 테넌트 사용자로 스토리지 계정을 만들고 삭제했습니다. 그리고 클라우드 사용자로 삭제한 스토리지 계정을 복구했으며 스토리지 용량을 회수했습니다.
