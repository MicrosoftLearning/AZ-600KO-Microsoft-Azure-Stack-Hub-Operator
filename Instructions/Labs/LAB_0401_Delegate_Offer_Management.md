---
lab:
    title: '랩: Azure Stack Hub에서 제안 관리 위임'
    module: '모듈 4: ID 및 액세스 관리'
---

# 랩 - Azure Stack Hub에서 제안 관리 위임
# 학생 랩 매뉴얼

## 랩 종속성

- 없음

## 예상 소요 시간

45분

## 랩 시나리오

여러분은 Azure Stack Hub 환경의 운영자입니다. 내부 기술 지원 담당자에게 제안 관리를 위임해야 합니다.

## 목표

이 랩을 완료하면 다음을 수행할 수 있습니다.

- Azure Stack Hub 제안 위임 구현

## 랩 환경 

랩 환경에는 다음과 같은 구성 요소가 포함됩니다.

- 다음 액세스 지점을 사용하여 **AzS-HOST1** 서버에서 실행되는 ASDK 배포:

  - 관리자 포털: https://adminportal.local.azurestack.external
  - 관리자 ARM 엔드포인트: https://adminmanagement.local.azurestack.external
  - 사용자 포털: https://portal.local.azurestack.external
  - 사용자 ARM 엔드포인트: https://management.local.azurestack.external

- 관리자:

  - ASDK 클라우드 운영자 사용자 이름: **CloudAdmin@azurestack.local**
  - ASDK 클라우드 운영자 암호: **Pa55w.rd1234**
  - ASDK 호스트 관리자 사용자 이름: **AzureStackAdmin@azurestack.local**
  - ASDK 호스트 관리자 암호: **Pa55w.rd1234**

이 랩을 진행하면서 추가 사용자 계정을 만듭니다.

### 연습 0: 랩 준비

이 연습에서는 이 랩에서 사용할 Active Directory 사용자 계정을 만듭니다.

1. 위임된 관리 사용자 계정 만들기(클라우드 운영자 역할)
1. 테넌트 사용자 계정 만들기(클라우드 운영자 역할)


#### 작업 1: 위임된 관리 사용자 계정 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 위임된 관리 사용자 계정 만들기(클라우드 운영자 역할)

1. 필요한 경우 다음 자격 증명을 사용하여 **AzS-HOST1**에 로그인합니다.

    - 사용자 이름: **AzureStackAdmin@azurestack.local**
    - 암호: **Pa55w.rd1234**

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 **시작**을 클릭하고 시작 메뉴에서 **Windows 관리 도구**를 클릭합니다. 그런 다음 관리 도구 목록에서 **Active Directory 관리 센터**를 두 번 클릭합니다.
1. **Active Directory 관리 센터** 콘솔에서 **azurestack(로컬)** 을 클릭합니다.
1. 세부 정보 창에서 **사용자** 컨테이너를 두 번 클릭합니다.
1. **작업** 창의 **사용자** 섹션에서 **새로 만들기 -> 사용자**를 클릭합니다.
1. **사용자 만들기** 창에서 다음 설정을 지정하고 **확인**을 클릭합니다. 

    - 전체 이름: **DP1**
    - 사용자 UPN 로그온: **dp1@azurestack.local**
    - 사용자 SamAccountName: **azurestack\dp1**
    - 암호: **Pa55w.rd**
    - 암호 옵션: **기타 암호 옵션 -> 암호 사용 기간 제한 없음**


#### 작업 2: 테넌트 사용자 계정 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 테넌트 사용자 계정 만들기(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 **Active Directory 관리 센터** 콘솔 내 **작업** 창 **사용자** 섹션에서 **새로 만들기 -> 사용자**를 클릭합니다.
1. **사용자 만들기** 창에서 다음 설정을 지정하고 **확인**을 클릭합니다. 

    - 전체 이름: **T1U1**
    - 사용자 UPN 로그온: **t1u1@azurestack.local**
    - 사용자 SamAccountName: **azurestack\t1u1**
    - 암호: **Pa55w.rd**
    - 암호 옵션: **기타 암호 옵션 -> 암호 사용 기간 제한 없음**

>**검토**: 이 연습에서는 이 랩에서 사용할 Active Directory 계정을 만들었습니다.


### 연습 1: 위임된 공급자 지정(클라우드 운영자 역할)

이 연습에서는 클라우드 운영자 역할을 맡아 **구독** 서비스와 해당 제안으로 구성된 요금제를 만듭니다. 그런 다음 새 제안이 포함된 구독을 만들어 구독자로 위임된 공급자를 지정합니다.

1. 구독 서비스가 포함된 요금제 만들기(클라우드 운영자 역할)
1. 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)
1. 제안이 포함된 새 구독 만들기(위임된 공급자 역할)


#### 작업 1: 구독 서비스가 포함된 요금제 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 구독 서비스가 포함된 요금제 만들기(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 [Azure Stack Hub 관리자 포털](https://adminportal.local.azurestack.external/)이 표시된 웹 브라우저 창을 열고 CloudAdmin@azurestack.local로 로그인합니다.
1. Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **요금제**를 클릭합니다.
1. **새 요금제** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **co-subscription-plan**
    - 리소스 이름: **co-subscription-plan**
    - 리소스 그룹: 새 리소스 그룹 **co-subscription-RG**의 이름.

1. **다음: 서비스 >** 를 클릭합니다.
1. **새 요금제** 블레이드의 **서비스** 탭에서 **Microsoft.Subscriptions** 체크박스를 선택합니다.
1. **다음: 할당량>** 을 클릭합니다.
1. **새 요금제** 블레이드의 **할당량** 탭에서 **Microsoft.Subscriptions** 드롭다운 목록의 **delegatedProviderQuota**를 선택합니다. 
1. **검토 + 만들기**와 **만들기**를 차례로 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

#### 작업 2: 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **제안**을 클릭합니다.
1. **새 제안 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **cotodp-subscription-offer**
    - 리소스 이름: **cotodp-subscription-offer**
    - 리소스 그룹: **co-subscription-RG**
    - 이 제안을 공개로 설정: **예**

1. **다음: 기본 요금제 >** 를 클릭합니다. 
1. **새 제안 만들기** 블레이드의 **기본 요금제** 탭에서 **co-subscription-plan** 항목 옆의 체크박스를 선택합니다.
1. **다음: 추가 요금제 >** 를 클릭합니다.
1. **추가 요금제** 설정은 기본값으로 유지하고 **검토 + 만들기**를 클릭한 다음 **만들기**를 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

#### 작업 3: 제안이 포함된 새 구독을 만들어 구독자로 위임된 공급자 추가(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 제안이 포함된 새 구독을 만들어 구독자로 위임된 공급자 추가(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **구독**을 클릭합니다.
1. **사용자 구독 만들기** 블레이드에서 다음 설정을 지정합니다.

    - 이름: **dp1-subscription1**
    - 사용자: **dp1@azurestack.local**
    - 디렉터리 테넌트: **ADFS.azurestack.local**

1. 공용 제안 목록에서 **cotodp-subscription-offer**를 클릭하고 **만들기**를 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

>**검토**: 이 연습에서는 위임된 공급자를 지정했습니다.


### 연습 2: 위임된 제안을 만들어 위임된 공급자에게 위임(클라우드 운영자 역할)

이 연습에서는 클라우드 운영자 역할을 맡아 서비스가 포함된 제안을 만듭니다. 그러면 위임된 공급자가 해당 제안을 테넌트에게 제공합니다.

1. 위임할 요금제 만들기(클라우드 운영자 역할)
1. 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)
1. 위임된 공급자에게 제안 위임(클라우드 운영자 역할)

#### 작업 1: 위임할 요금제 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 위임할 요금제 만들기(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **요금제**를 클릭합니다.
1. **새 요금제** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **co-services1-plan**
    - 리소스 이름: **co-services1-plan**
    - 리소스 그룹: 새 리소스 그룹 **co-services-RG**의 이름.

1. **다음: 서비스 >** 를 클릭합니다.
1. **새 요금제** 블레이드의 **서비스** 탭에서 **Microsoft.Storage** 체크박스를 선택합니다.
1. **다음: 할당량>** 을 클릭합니다.
1. **새 요금제** 블레이드의 **할당량** 탭에서 **Microsoft.Storage** 드롭다운 목록 옆의 **새로 만들기**를 클릭합니다.
1. **스토리지 할당량 만들기** 블레이드에서 다음 설정을 지정하고 **확인**을 클릭합니다.

    - 이름: **co-services1-storage-quota**
    - 최대 용량(GB): **200**
    - 총 스토리지 계정 수: **1**

1. **검토 + 만들기**와 **만들기**를 차례로 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.


#### 작업 2: 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 요금제를 기준으로 제안 만들기(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창에서 **+ 리소스 만들기**를 클릭합니다. 
1. **새로 만들기** 블레이드에서 **제안+요금제**를 클릭합니다.
1. **제안+요금제** 블레이드에서 **제안**을 클릭합니다.
1. **새 제안 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 표시 이름: **cotodp-services1-offer**
    - 리소스 이름: **cotodp-services1-offer**
    - 리소스 그룹: **co-services-RG**
    - 이 제안을 공개로 설정: **예**

1. **다음: 기본 요금제 >** 를 클릭합니다. 
1. **새 제안 만들기** 블레이드의 **기본 요금제** 탭에서 **co-services1-plan** 항목 옆의 체크박스를 선택합니다.
1. **다음: 추가 요금제 >** 를 클릭합니다.
1. **추가 요금제** 설정은 기본값으로 유지하고 **검토 + 만들기**를 클릭한 다음 **만들기**를 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.


#### 작업 3: 위임된 공급자에게 제안 위임(클라우드 운영자 역할)

이 작업에서는 다음을 수행합니다.

- 위임된 공급자에게 제안 위임(클라우드 운영자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내의 Azure Stack Hub 관리자 포털이 표시된 웹 브라우저 창 허브 메뉴에서 **제안**을 클릭합니다. 
1. **제안** 블레이드에서 **cotodp-services1-offer**를 클릭합니다.
1. **cotodp-services1-offer** 블레이드에서 **위임된 공급자**를 클릭합니다.
1. **cotodp-services1-offer \| 위임된 공급자** 블레이드에서 **+ 추가**를 클릭합니다.
1. **제안 위임** 블레이드에서 다음 설정을 지정하고 **위임**을 클릭합니다.

    - 이름: **cotodp-services1-offer**
    - 위임된 공급자 구독 선택: **dp1-subscription1**

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

>**검토**: 이 연습에서는 제안을 만들어 위임된 공급자에게 위임했습니다.


### 연습 3: 테넌트에 위임된 제안 만들기(위임된 공급자 역할)

이 연습에서는 위임된 공급자 역할을 맡아 제안(클라우드 운영자가 제공한 제안 기반)을 만듭니다. 테넌트는 이 제안을 구독할 수 있습니다.

1. 테넌트용으로 위임된 공급자 제안 만들기(클라우드 운영자 역할)
1. 위임된 공급자 포털의 URL 확인(위임된 공급자 역할)

#### 작업 1: 테넌트용으로 위임된 공급자 제안 만들기(위임된 공급자 역할)

이 작업에서는 다음을 수행합니다.

- 위임된 공급자용 클라우드 운영자 제안을 기준으로 테넌트용 제안 만들기(위임된 공급자 역할)

그러면 테넌트가 위임된 공급자의 제안을 기준으로 구독을 만들 수 있습니다.

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 웹 브라우저의 InPrivate 세션을 시작합니다.
1. 웹 브라우저 창에서 [Azure Stack Hub 사용자 포털](https://portal.local.azurestack.external)로 이동하여 **Pa55w.rd** 암호를 사용해 **dp1@azurestack.local**로 로그인합니다.
1. Azure Stack Hub 사용자 포털의 허브 메뉴에서 **모든 서비스**를 클릭하고 **모든 서비스** 블레이드에서 **제안**을 클릭합니다.
1. **제안** 블레이드에서 **+ 추가**를 클릭합니다.
1. **새 제안 만들기** 블레이드에서 다음 설정을 지정합니다.

    - 표시 이름: **dp1tot-services1-offer**
    - 리소스 이름: **dp1tot-services1-offer**
    - 공급자 구독: **dp1-subscription1**
    - 리소스 그룹: 새 리소스 그룹 **dp1-RG**의 이름.

1. **위임된 제안**을 클릭합니다.
1. **위임된 제안** 블레이드에서 **cotodp-services1-offer**를 클릭합니다.
1. **새 제안 만들기** 블레이드로 돌아와서 **만들기**를 클릭합니다.

    >**참고**: 배포가 완료될 때까지 기다립니다. 몇 초면 끝납니다.

1. Azure Stack Hub 사용자 포털의 **제안** 블레이드로 돌아와서 **새로 고침**을 클릭하고 새로 만든 제안 **dp1tot-services1-offer**를 클릭합니다.
1. **dp1tot-services1-offer** 블레이드에서 **상태 변경**을 클릭하고 드롭다운 목록에서 **공용**을 클릭합니다.


#### 작업 2: 위임된 공급자 포털의 URL 확인(위임된 공급자 역할)

이 작업에서는 다음을 수행합니다.

- 위임된 공급자 포털의 URL 확인(위임된 공급자 역할)

1. **dp1@azurestack.local**로 로그인한 상태로 Azure Stack Hub 사용자 포털의 허브 메뉴에서 **모든 서비스**를 클릭하고 **모든 서비스** 블레이드의 서비스 목록에서 **구독**을 클릭합니다.
1. **구독** 블레이드에서 **dp1-subscription1**을 클릭합니다.
1. **dp1-subscription1** 위임된 공급자 구독 블레이드에서 **속성**을 클릭합니다.
1. 속성 블레이드에서 **포털 URL**의 값을 클립보드에 복사합니다. 이 랩의 다음 연습에서 해당 값이 필요합니다. 
1. Azure Stack Hub 사용자 포털 오른쪽 위에서 사용자 아바타 아이콘을 클릭하고 드롭다운 메뉴에서 **로그아웃**을 클릭합니다.

    >**참고**: 테넌트는 위임된 공급자 포털 URL에서 제안을 구독해야 합니다.

>**검토**: 이 연습에서는 위임된 공급자 제안을 만들었습니다.


### 연습 4: 위임된 공급자 제안에 등록(테넌트 사용자 역할)

이 연습에서는 테넌트 사용자 역할을 맡아 위임된 공급자 제안에 등록한 후 새 구독에서 리소스를 만듭니다. 이 연습에서는 다음 작업을 수행합니다.

1. 위임된 공급자 제안에 등록(테넌트 사용자 역할)
1. 새 구독에서 리소스 만들기(테넌트 사용자 역할)

#### 작업 1: 위임된 공급자 제안에 등록(테넌트 사용자 역할)

이 작업에서는 다음을 수행합니다.

- 위임된 제안에 등록(테넌트 사용자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 웹 브라우저의 InPrivate 세션을 시작합니다.
1. 웹 브라우저 창에서 이전 연습에서 확인한 위임된 공급자 포털 URL로 이동한 다음 **Pa55w.rd** 암호를 사용해 **t1u1@azurestack.local**로 로그인합니다.

    >**참고**: 여기서는 표준 Azure Stack Hub 사용자 포털 URL을 사용하면 안 됩니다.

1. Azure Stack Hub 사용자 포털에서 **구독 가져오기** 타일을 클릭합니다.
1. **구독 가져오기** 블레이드의 **이름** 텍스트 상자에 **t1u1-subscription1**을 입력합니다.
1. **구독 가져오기** 블레이드에서 **dp1tot-services1-offer** 제안을 선택하고 **만들기**를 클릭합니다.
1. **구독이 생성되었습니다. 구독을 사용해서 시작하려면 포털을 새로 고쳐야 합니다.** 메시지가 표시되면 **새로 고침**을 클릭합니다.

#### 작업 2: 새 구독에서 리소스 만들기(테넌트 사용자 역할)

이 작업에서는 다음을 수행합니다.

- 새 구독에서 리소스 만들기(테넌트 사용자 역할)

1. **AzS-HOST1**에 연결된 원격 데스크톱 세션 내에서 **t1u1@azurestack.local**로 로그인한 상태로 Azure Stack Hub 사용자 포털의 허브 메뉴에서 **모든 서비스**를 클릭하고 **모든 서비스** 블레이드의 서비스 목록에서 **구독**을 클릭합니다.
1. **구독** 블레이드에서 **t1u1-subscription1**을 클릭합니다.
1. **t1u1-subscription1** 블레이드에서 **리소스**를 클릭합니다.
1. **t1u1-subscription1 \| 리소스** 블레이드에서 **+ 추가**를 클릭합니다.
1. **새로 만들기** 블레이드에서 **데이터 + 스토리지**를 클릭하고 리소스 종류 목록에서 **스토리지 계정**을 클릭합니다.
1. **스토리지 계정 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정합니다.

    - 구독: **t1u1-subscription1**
    - 리소스 그룹: 새 리소스 그룹 **delegated-RG**의 이름.
    - 스토리지 계정 이름: 소문자나 숫자 3~24자가 포함된 고유한 이름
    - 위치: **로컬**
    - 성능: **표준**
    - 계정 종류: **스토리지(범용 v1)**
    - 복제: **LRS(로컬 중복 스토리지)**

1. **스토리지 계정 만들기** 블레이드의 **기본** 탭에서 **다음: 고급 >** 을 클릭합니다.
1. **스토리지 계정 만들기** 블레이드의 **고급** 탭에서 기본 설정을 유지하고 **검토 + 만들기**를 클릭합니다.
1. **스토리지 계정 만들기**의 **검토 + 만들기** 탭에서 **만들기**를 클릭합니다.

    >**참고**: 스토리지 계정이 프로비전될 때까지 기다립니다. 1분 정도 걸립니다.

1. 스토리지 계정이 정상적으로 작성되었는지 확인합니다.

>**검토**: 이 연습에서는 위임된 공급자 제안을 구독하여 새 구독을 만들고 새 구독에서 스토리지 계정을 프로비전했습니다.
